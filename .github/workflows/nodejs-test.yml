name: Node.js Test

on:
  workflow_call:
    inputs:
      # <--------------- ESLint Setting --------------->
      eslint-enable:
        required: false
        type: boolean
        description: Enable ESLint
        default: false

      eslint-command:
        required: false
        type: string
        description: ESLint command
        default: npm run lint

      # <--------------- UNIT-TEST SETTINGS -------------->
      unit-test-enable:
        required: false
        type: boolean
        description: "To disable the unit-tests job set to false"
        default: true
      unit-test-command:
        required: false
        type: string
        description: "Used to override the default command to run your unit tests e.g. yarn test:unit-ci"
        default: "npm run test:unit-ci"

    secrets:
      token:
        required: true 

jobs:
  # <---------------------- ESLINT ---------------------->
  eslint:
    name: ESLint Check
    runs-on: ubuntu-22.04
    if: ${{ inputs.eslint-enable }}
    steps:
      - name: Checkout Source
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install Dependencies
        run: npm install

      - name: Echo ESLint message
        run: echo "Running ESLint..."

      - name: Run ESLint
        run: |
          ${{inputs.eslint-command}}
